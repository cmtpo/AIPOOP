<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>臺南愛(AI)腸篩計畫 - 智慧轉診與篩檢教學指引</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Phosphor Icons (for flat design icons) -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <!-- Google Fonts: Noto Sans TC -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f0f4f8;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Shared Components ---
        const Header = ({ goHome, title, subtitle, themeColor }) => (
            <header className={`bg-white shadow-sm sticky top-0 z-50 border-b-4 border-${themeColor}-500`}>
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
                    <div className="flex items-center cursor-pointer" onClick={goHome}>
                        <div className={`p-2 rounded-full bg-${themeColor}-100 text-${themeColor}-600 mr-3`}>
                            <i className="ph-fill ph-house text-xl"></i>
                        </div>
                        <div>
                            <h1 className="text-xl font-bold text-gray-800 leading-none">臺南愛(AI)腸篩</h1>
                            <p className="text-xs text-gray-500 mt-1">{subtitle}</p>
                        </div>
                    </div>
                    <button onClick={goHome} className="text-sm text-gray-500 hover:text-gray-800 flex items-center">
                        <i className="ph ph-arrow-u-up-left mr-1"></i> 返回首頁
                    </button>
                </div>
            </header>
        );

        const SectionTitle = ({ icon, title, color }) => (
            <div className="flex items-center mb-6">
                <div className={`w-10 h-10 rounded-lg bg-${color}-100 text-${color}-600 flex items-center justify-center text-2xl mr-3 shadow-sm`}>
                    <i className={`ph-fill ${icon}`}></i>
                </div>
                <h2 className="text-2xl font-bold text-gray-800">{title}</h2>
            </div>
        );

        // --- Landing Page ---
        const LandingPage = ({ setView }) => {
            return (
                <div className="min-h-screen flex flex-col items-center justify-center p-6 bg-gradient-to-br from-blue-50 to-indigo-100 relative overflow-hidden">
                    <div className="absolute top-0 left-0 w-64 h-64 bg-blue-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob"></div>
                    <div className="absolute bottom-0 right-0 w-64 h-64 bg-teal-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-2000"></div>

                    <div className="text-center mb-10 z-10">
                        <h1 className="text-4xl md:text-5xl font-extrabold text-slate-800 mb-4 tracking-tight">
                            臺南愛(AI)腸篩計畫
                        </h1>
                        <p className="text-lg md:text-xl text-slate-600 max-w-2xl mx-auto">
                            智慧轉診與篩檢教學指引，守護市民腸道健康
                        </p>
                    </div>

                    <div className="grid md:grid-cols-2 gap-8 w-full max-w-5xl z-10">
                        <button 
                            onClick={() => setView('citizen')}
                            className="group relative bg-white rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-transparent hover:border-orange-200 flex flex-col items-center text-center overflow-hidden"
                        >
                            <div className="absolute top-0 left-0 w-full h-2 bg-orange-400"></div>
                            <div className="w-24 h-24 bg-orange-100 rounded-full flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                                <i className="ph-duotone ph-smiley text-5xl text-orange-500"></i>
                            </div>
                            <h2 className="text-2xl font-bold text-gray-800 mb-2 group-hover:text-orange-600 transition-colors">我是民眾</h2>
                            <p className="text-gray-500 mb-6">市民專區</p>
                            <ul className="text-sm text-gray-600 space-y-2 text-left w-full max-w-xs bg-orange-50 p-4 rounded-xl">
                                <li className="flex items-center"><i className="ph-fill ph-check-circle text-orange-500 mr-2"></i> 查詢篩檢資格</li>
                                <li className="flex items-center"><i className="ph-fill ph-check-circle text-orange-500 mr-2"></i> 了解領 $300 獎勵金流程</li>
                                <li className="flex items-center"><i className="ph-fill ph-check-circle text-orange-500 mr-2"></i> 尋找合作診所</li>
                            </ul>
                            <div className="mt-8 px-6 py-2 bg-orange-500 text-white rounded-full font-medium opacity-0 group-hover:opacity-100 transition-opacity transform translate-y-2 group-hover:translate-y-0">
                                進入專區 <i className="ph-bold ph-arrow-right ml-1"></i>
                            </div>
                        </button>

                        <button 
                            onClick={() => setView('clinic')}
                            className="group relative bg-white rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-transparent hover:border-blue-200 flex flex-col items-center text-center overflow-hidden"
                        >
                            <div className="absolute top-0 left-0 w-full h-2 bg-blue-500"></div>
                            <div className="w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                                <i className="ph-duotone ph-stethoscope text-5xl text-blue-500"></i>
                            </div>
                            <h2 className="text-2xl font-bold text-gray-800 mb-2 group-hover:text-blue-600 transition-colors">我是合作診所</h2>
                            <p className="text-gray-500 mb-6">醫護專區</p>
                            <ul className="text-sm text-gray-600 space-y-2 text-left w-full max-w-xs bg-blue-50 p-4 rounded-xl">
                                <li className="flex items-center"><i className="ph-fill ph-check-circle text-blue-500 mr-2"></i> 篩檢執行 SOP</li>
                                <li className="flex items-center"><i className="ph-fill ph-check-circle text-blue-500 mr-2"></i> 表單填寫指南 (A05/A06)</li>
                                <li className="flex items-center"><i className="ph-fill ph-check-circle text-blue-500 mr-2"></i> 經費核銷教學</li>
                            </ul>
                             <div className="mt-8 px-6 py-2 bg-blue-500 text-white rounded-full font-medium opacity-0 group-hover:opacity-100 transition-opacity transform translate-y-2 group-hover:translate-y-0">
                                進入專區 <i className="ph-bold ph-arrow-right ml-1"></i>
                            </div>
                        </button>
                    </div>
                    
                    <footer className="mt-16 text-gray-400 text-sm">
                        © 2024 臺南市政府衛生局 & 臺南市醫師公會
                    </footer>
                </div>
            );
        };

        // --- Citizen Portal ---
        const CitizenPortal = ({ goHome }) => {
            const [activeTab, setActiveTab] = useState('fit'); // 'fit' or 'colon'
            const [openFaq, setOpenFaq] = useState(null);

            const faqs = [
                {
                    q: "我住在台南工作/唸書，但戶籍在高雄，可以參加嗎？",
                    a: "很抱歉，不行喔！本計畫僅限「設籍臺南市」的市民參加。即使您實際居住在台南，若身分證背面的戶籍地址不是台南市，則無法申請此項補助。"
                },
                {
                    q: "我不在 45-74 歲這個範圍內，真的不能參加嗎？",
                    a: "基本上公費補助對象為 45-74 歲。但若您是「40-44 歲」且二等親內（父母、兄弟姊妹）有大腸癌家族病史，出示相關證明後也可以免費參加篩檢喔！"
                },
                {
                    q: "領取 $300 獎勵金是給現金嗎？",
                    a: "是的！只要完成篩檢並填寫完電子表單，簽署收據後，診所會直接發放 $300 元現金給您。"
                },
                {
                    q: "我可以幫家人代領篩檢管或代領獎金嗎？",
                    a: "可以。但請務必攜帶當事人的「身分證」以供核對。填寫簽收單時，需簽署「病患本人的姓名」，若由家屬代簽，請在旁邊註明（代）。"
                },
                {
                    q: "如果篩檢結果是陽性怎麼辦？",
                    a: "請別擔心，陽性不代表罹癌。請配合診所轉診安排「大腸鏡檢查」，完成檢查後，還可以再領一次 $300 元獎勵金（共可領兩次）！"
                }
            ];

            return (
                <div className="min-h-screen bg-orange-50 fade-in">
                    <Header goHome={goHome} title="民眾專區" subtitle="守護健康，還能領獎勵" themeColor="orange" />

                    <main className="max-w-4xl mx-auto px-4 py-8 space-y-8">
                        
                        {/* 1. Eligibility Checker (Text Only Version) */}
                        <section className="bg-white rounded-2xl p-6 shadow-md border-l-8 border-orange-400">
                            <SectionTitle icon="ph-clipboard-text" title="我符合資格嗎？" color="orange" />
                            <div className="space-y-4">
                                <p className="text-gray-600 mb-4 font-medium">若您符合以下條件，即可免費參加篩檢：</p>
                                <div className="grid md:grid-cols-2 gap-4">
                                    {[
                                        "設籍臺南市（需出示身分證）",
                                        "年齡 45-74 歲（公費補助對象）",
                                        "或是 40-44 歲且有二等親內大腸癌家族病史",
                                        "過去兩年內「未做過」公費糞便潛血或大腸鏡檢查"
                                    ].map((item, idx) => (
                                        <div key={idx} className="flex items-start p-4 bg-orange-50 rounded-xl border border-orange-100">
                                            <div className="bg-orange-100 rounded-full p-1 mr-3 mt-0.5 flex-shrink-0">
                                                <i className="ph-fill ph-check text-orange-600 text-lg"></i>
                                            </div>
                                            <span className="text-gray-700 font-medium leading-relaxed">{item}</span>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </section>

                        {/* 2. Process Flow */}
                        <section className="bg-white rounded-2xl shadow-md overflow-hidden">
                            <div className="p-6 pb-0">
                                <SectionTitle icon="ph-gift" title="篩檢與領獎流程" color="orange" />
                                <div className="flex space-x-2 bg-gray-100 p-1 rounded-lg inline-flex mb-6">
                                    <button 
                                        onClick={() => setActiveTab('fit')}
                                        className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${activeTab === 'fit' ? 'bg-white text-orange-600 shadow-sm' : 'text-gray-500 hover:text-gray-700'}`}
                                    >
                                        糞便潛血篩檢 (FIT)
                                    </button>
                                    <button 
                                        onClick={() => setActiveTab('colon')}
                                        className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${activeTab === 'colon' ? 'bg-white text-orange-600 shadow-sm' : 'text-gray-500 hover:text-gray-700'}`}
                                    >
                                        大腸鏡檢查 (陽性個案)
                                    </button>
                                </div>
                            </div>

                            <div className="p-6 bg-gradient-to-r from-orange-50 to-white min-h-[300px]">
                                {activeTab === 'fit' ? (
                                    <div className="grid md:grid-cols-5 gap-2 md:gap-4 relative">
                                        {/* Background connecting line */}
                                        <div className="hidden md:block absolute top-12 left-[10%] w-[80%] h-1 bg-orange-200 z-0"></div>
                                        
                                        {[
                                            { step: "1", title: "查驗身分", desc: "出示雙證件(身分證+健保卡)，確認設籍臺南", icon: "ph-identification-card", highlight: true },
                                            { step: "2", title: "領管", desc: "確認資格符合後，領取篩檢盒", icon: "ph-test-tube" },
                                            { step: "3", title: "繳回", desc: "在家採樣後，將檢體繳回診所", icon: "ph-hand-deposit" },
                                            { step: "4", title: "掃碼填表", desc: "掃描診所 QR Code，填寫表單 (A05)", icon: "ph-qr-code", highlight: true },
                                            { step: "5", title: "領紅包", desc: "簽收 A01 收據，現場領取 $300 現金", icon: "ph-currency-circle-dollar", reward: true }
                                        ].map((s, i) => (
                                            <div key={i} className="relative z-10 flex flex-col items-center text-center group">
                                                <div className={`w-20 h-20 md:w-24 md:h-24 rounded-full border-4 border-white shadow-lg flex items-center justify-center mb-4 transition-transform group-hover:scale-105 ${s.reward ? 'bg-yellow-400 text-yellow-900' : (s.highlight ? 'bg-orange-600 text-white' : 'bg-orange-500 text-white')}`}>
                                                    <i className={`ph-fill ${s.icon} text-3xl md:text-4xl`}></i>
                                                </div>
                                                <div className={`bg-white p-3 md:p-4 rounded-xl shadow-sm w-full h-full border ${s.highlight ? 'border-orange-300 ring-2 ring-orange-100' : 'border-orange-100'}`}>
                                                    <span className="text-xs font-bold text-orange-400 uppercase tracking-wider">Step {s.step}</span>
                                                    <h3 className="font-bold text-base md:text-lg text-gray-800 mb-2 leading-tight">{s.title}</h3>
                                                    <p className="text-xs md:text-sm text-gray-600 leading-snug">{s.desc}</p>
                                                    {s.reward && <div className="mt-2 inline-block px-2 py-1 bg-yellow-100 text-yellow-700 text-xs font-bold rounded-full">💰 $300</div>}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                ) : (
                                    <div className="grid md:grid-cols-5 gap-2 md:gap-4 relative">
                                        <div className="hidden md:block absolute top-12 left-[10%] w-[80%] h-1 bg-orange-200 z-0"></div>
                                        {[
                                            { step: "1", title: "報到查驗", desc: "出示雙證件與轉診單，確認身分", icon: "ph-identification-card" },
                                            { step: "2", title: "轉診安排", desc: "糞便潛血陽性，安排大腸鏡", icon: "ph-hospital" },
                                            { step: "3", title: "檢查", desc: "完成大腸鏡檢查", icon: "ph-magnifying-glass" },
                                            { step: "4", title: "掃碼填表", desc: "掃描 QR Code，填寫表單 (A06)", icon: "ph-qr-code", highlight: true },
                                            { step: "5", title: "領紅包", desc: "簽收 A02 收據，現場領取 $300 現金", icon: "ph-currency-circle-dollar", reward: true }
                                        ].map((s, i) => (
                                            <div key={i} className="relative z-10 flex flex-col items-center text-center group">
                                                <div className={`w-20 h-20 md:w-24 md:h-24 rounded-full border-4 border-white shadow-lg flex items-center justify-center mb-4 transition-transform group-hover:scale-105 ${s.reward ? 'bg-yellow-400 text-yellow-900' : 'bg-orange-500 text-white'}`}>
                                                    <i className={`ph-fill ${s.icon} text-3xl md:text-4xl`}></i>
                                                </div>
                                                <div className="bg-white p-3 md:p-4 rounded-xl shadow-sm w-full h-full border border-orange-100">
                                                    <span className="text-xs font-bold text-orange-400 uppercase tracking-wider">Step {s.step}</span>
                                                    <h3 className="font-bold text-base md:text-lg text-gray-800 mb-2 leading-tight">{s.title}</h3>
                                                    <p className="text-xs md:text-sm text-gray-600 leading-snug">{s.desc}</p>
                                                     {s.reward && <div className="mt-2 inline-block px-2 py-1 bg-yellow-100 text-yellow-700 text-xs font-bold rounded-full">💰 $300</div>}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        </section>

                        {/* 3. FAQ Section (NEW) */}
                        <section className="bg-white rounded-2xl p-6 shadow-md">
                            <SectionTitle icon="ph-question" title="常見問題 (FAQ)" color="orange" />
                            <div className="space-y-3">
                                {faqs.map((faq, index) => (
                                    <div key={index} className="border border-orange-100 rounded-xl overflow-hidden">
                                        <button 
                                            onClick={() => setOpenFaq(openFaq === index ? null : index)}
                                            className="w-full flex items-center justify-between p-4 bg-orange-50 hover:bg-orange-100 transition-colors text-left"
                                        >
                                            <span className="font-bold text-gray-800 flex items-center">
                                                <span className="bg-orange-500 text-white text-xs px-2 py-1 rounded mr-3">Q</span>
                                                {faq.q}
                                            </span>
                                            <i className={`ph-bold ph-caret-down text-orange-400 transition-transform ${openFaq === index ? 'rotate-180' : ''}`}></i>
                                        </button>
                                        {openFaq === index && (
                                            <div className="p-4 bg-white text-gray-600 text-sm leading-relaxed border-t border-orange-100">
                                                {faq.a}
                                            </div>
                                        )}
                                    </div>
                                ))}
                            </div>
                        </section>
                         
                         {/* Download Link */}
                        <div className="bg-orange-100 rounded-xl p-6 text-center">
                            <p className="text-orange-800 font-medium mb-3">需要更多資訊？</p>
                            <button className="bg-white text-orange-600 px-6 py-2 rounded-full font-bold shadow-sm hover:bg-orange-50 transition-colors border border-orange-200">
                                <i className="ph-bold ph-download-simple mr-2"></i> 下載詳細公文與診所名單
                            </button>
                        </div>
                    </main>
                </div>
            );
        };

        // --- Clinic Portal ---
        const ClinicPortal = ({ goHome }) => {
            const [activeSection, setActiveSection] = useState('sop'); // sop, money, docs

            const sidebarItems = [
                { id: 'sop', label: '執行作業 SOP', icon: 'ph-check-square' },
                { id: 'money', label: '經費與核銷', icon: 'ph-currency-circle-dollar' },
                { id: 'docs', label: '表單與寄送', icon: 'ph-files' },
            ];

            return (
                <div className="min-h-screen bg-slate-50 fade-in">
                    <Header goHome={goHome} title="合作診所專區" subtitle="流程規範、表單與經費核銷" themeColor="blue" />

                    <div className="max-w-7xl mx-auto px-4 py-8 flex flex-col md:flex-row gap-8">
                        
                        {/* Sidebar Navigation */}
                        <aside className="w-full md:w-64 flex-shrink-0">
                            <div className="bg-white rounded-2xl shadow-sm p-4 sticky top-24">
                                <h3 className="text-xs font-bold text-gray-400 uppercase tracking-wider mb-4 px-2">功能導航</h3>
                                <nav className="space-y-2">
                                    {sidebarItems.map(item => (
                                        <button
                                            key={item.id}
                                            onClick={() => setActiveSection(item.id)}
                                            className={`w-full flex items-center p-3 rounded-xl transition-all ${activeSection === item.id ? 'bg-blue-500 text-white shadow-md' : 'text-gray-600 hover:bg-slate-100'}`}
                                        >
                                            <i className={`ph-fill ${item.icon} text-xl mr-3`}></i>
                                            <span className="font-medium">{item.label}</span>
                                        </button>
                                    ))}
                                </nav>
                                <div className="mt-8 p-4 bg-blue-50 rounded-xl border border-blue-100">
                                    <h4 className="font-bold text-blue-800 text-sm mb-2">快速下載</h4>
                                    <ul className="space-y-2 text-xs text-blue-600">
                                        <li className="flex items-center cursor-pointer hover:underline"><i className="ph ph-file-pdf mr-1"></i> 計畫完整公文 PDF</li>
                                        <li className="flex items-center cursor-pointer hover:underline"><i className="ph ph-file-doc mr-1"></i> 空白表單 (B01/B02)</li>
                                    </ul>
                                </div>
                            </div>
                        </aside>

                        {/* Main Content Area */}
                        <main className="flex-1 bg-white rounded-2xl shadow-sm p-6 md:p-8 min-h-[600px]">
                            
                            {/* SECTION: SOP */}
                            {activeSection === 'sop' && (
                                <div className="space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
                                    <div className="border-b pb-4 mb-6">
                                        <h2 className="text-2xl font-bold text-gray-800 flex items-center">
                                            <i className="ph-fill ph-check-square text-blue-500 mr-3"></i> 執行作業 SOP
                                        </h2>
                                        <p className="text-gray-500 mt-1">請依照檢查項目選擇對應流程</p>
                                    </div>

                                    {/* SOP: FIT */}
                                    <div className="bg-slate-50 rounded-xl border border-slate-200 overflow-hidden">
                                        <div className="bg-blue-600 text-white px-6 py-3 font-bold flex items-center">
                                            <span className="bg-white text-blue-600 text-xs px-2 py-1 rounded mr-2">A</span>
                                            糞便潛血篩檢 (FIT)
                                        </div>
                                        <div className="p-6">
                                            <div className="flex flex-col md:flex-row gap-4 items-stretch">
                                                {[
                                                    { title: "核對資格", text: "確認身分證(設籍台南)及年齡資格" },
                                                    { title: "發放/回收", text: "發放篩檢盒 → 待民眾繳回" },
                                                    { title: "數位填表", text: "指導民眾掃描 QR Code，填寫 A05 表單", highlight: true },
                                                    { title: "發放獎勵", text: "確認填畢 → 簽署 A01 → 發放 $300", highlight: true },
                                                    { title: "上傳", text: "櫃台人員將結果上傳至平台" }
                                                ].map((step, idx) => (
                                                    <div key={idx} className="flex-1 flex flex-col relative group">
                                                        <div className={`p-4 rounded-lg h-full border-2 ${step.highlight ? 'bg-yellow-50 border-yellow-300' : 'bg-white border-slate-200'} transition-all hover:shadow-md`}>
                                                            <div className="text-xs font-bold text-slate-400 mb-1">STEP {idx + 1}</div>
                                                            <div className="font-bold text-slate-800 mb-2">{step.title}</div>
                                                            <div className="text-sm text-slate-600">{step.text}</div>
                                                        </div>
                                                        {idx !== 4 && <div className="hidden md:block absolute top-1/2 -right-3 w-4 h-4 text-slate-300 z-10 transform -translate-y-1/2">➜</div>}
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    </div>

                                    {/* SOP: Colonoscopy */}
                                    <div className="bg-slate-50 rounded-xl border border-slate-200 overflow-hidden">
                                        <div className="bg-indigo-600 text-white px-6 py-3 font-bold flex items-center">
                                            <span className="bg-white text-indigo-600 text-xs px-2 py-1 rounded mr-2">B</span>
                                            大腸鏡檢查 (陽性個案)
                                        </div>
                                        <div className="p-6">
                                            <div className="flex flex-col md:flex-row gap-4">
                                                {[
                                                    { title: "時機", text: "針對篩檢陽性個案" },
                                                    { title: "數位填表", text: "檢查後，掃 QR Code 填寫 A06 表單", highlight: true },
                                                    { title: "發放獎勵", text: "簽署 A02 收據 → 發放 $300", highlight: true },
                                                    { title: "追蹤", text: "負責後續追蹤事宜" }
                                                ].map((step, idx) => (
                                                    <div key={idx} className="flex-1 flex flex-col relative">
                                                        <div className={`p-4 rounded-lg h-full border-2 ${step.highlight ? 'bg-yellow-50 border-yellow-300' : 'bg-white border-slate-200'}`}>
                                                            <div className="text-xs font-bold text-slate-400 mb-1">STEP {idx + 1}</div>
                                                            <div className="font-bold text-slate-800 mb-2">{step.title}</div>
                                                            <div className="text-sm text-slate-600">{step.text}</div>
                                                        </div>
                                                        {idx !== 3 && <div className="hidden md:block absolute top-1/2 -right-3 w-4 h-4 text-slate-300 z-10 transform -translate-y-1/2">➜</div>}
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* SECTION: Money */}
                            {activeSection === 'money' && (
                                <div className="space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
                                    <div className="border-b pb-4 mb-6">
                                        <h2 className="text-2xl font-bold text-gray-800 flex items-center">
                                            <i className="ph-fill ph-currency-circle-dollar text-green-600 mr-3"></i> 經費與核銷流程
                                        </h2>
                                        <div className="bg-yellow-50 text-yellow-800 p-3 rounded-lg mt-4 text-sm flex items-start border border-yellow-200">
                                            <i className="ph-fill ph-warning-circle text-lg mr-2 mt-0.5"></i>
                                            這是此計畫最容易出錯的環節，請務必詳閱「補款機制」。
                                        </div>
                                    </div>

                                    <div className="grid md:grid-cols-3 gap-6">
                                        {/* Card 1 */}
                                        <div className="bg-white p-6 rounded-xl border border-slate-200 shadow-sm relative">
                                            <div className="absolute top-0 right-0 p-4 opacity-10">
                                                <i className="ph-fill ph-bank text-6xl"></i>
                                            </div>
                                            <div className="w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center font-bold mb-4">1</div>
                                            <h3 className="font-bold text-lg mb-2">啟動資金</h3>
                                            <p className="text-gray-600 text-sm">第一批款項由醫師公會直接匯入診所帳戶。</p>
                                        </div>

                                        {/* Card 2: 80% Rule */}
                                        <div className="bg-yellow-50 p-6 rounded-xl border-2 border-yellow-400 shadow-md relative transform scale-105 z-10">
                                            <div className="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-yellow-400 text-yellow-900 text-xs font-bold px-3 py-1 rounded-full">
                                                關鍵機制
                                            </div>
                                            <div className="w-10 h-10 bg-yellow-200 text-yellow-800 rounded-full flex items-center justify-center font-bold mb-4">2</div>
                                            <h3 className="font-bold text-lg mb-2 text-yellow-900">補款機制 (80%原則)</h3>
                                            <p className="text-yellow-900 text-sm mb-3">當平台顯示發放達前次 <strong>80%</strong> 時，系統自動計算下一批撥款。</p>
                                            <div className="bg-white/50 p-2 rounded text-xs text-yellow-800">
                                                <i className="ph-bold ph-arrow-bend-down-right mr-1"></i> 收到款項後，需寄回 <strong>B02 撥付確認單</strong>
                                            </div>
                                        </div>

                                        {/* Card 3 */}
                                        <div className="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                                            <div className="w-10 h-10 bg-green-100 text-green-600 rounded-full flex items-center justify-center font-bold mb-4">3</div>
                                            <h3 className="font-bold text-lg mb-2">每季結算 (診所獎勵)</h3>
                                            <p className="text-gray-600 text-sm mb-2">平台每季統計名單。</p>
                                            <ul className="text-xs text-gray-500 space-y-1">
                                                <li>→ 診所確認收款</li>
                                                <li>→ 寄回 <strong>B04 領據</strong></li>
                                                <li>→ 公會核對後撥款</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* SECTION: Docs */}
                            {activeSection === 'docs' && (
                                <div className="space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
                                    <div className="border-b pb-4 mb-6">
                                        <h2 className="text-2xl font-bold text-gray-800 flex items-center">
                                            <i className="ph-fill ph-files text-purple-600 mr-3"></i> 表單對照與寄送
                                        </h2>
                                    </div>

                                    {/* Table */}
                                    <div className="overflow-x-auto">
                                        <table className="min-w-full text-sm text-left">
                                            <thead className="bg-slate-100 text-slate-600 font-bold uppercase">
                                                <tr>
                                                    <th className="px-4 py-3 rounded-tl-lg">代號</th>
                                                    <th className="px-4 py-3">表單名稱</th>
                                                    <th className="px-4 py-3">用途</th>
                                                    <th className="px-4 py-3 rounded-tr-lg">處理方式</th>
                                                </tr>
                                            </thead>
                                            <tbody className="divide-y divide-slate-200">
                                                <tr className="hover:bg-slate-50">
                                                    <td className="px-4 py-3 font-mono font-bold text-blue-600">A01</td>
                                                    <td className="px-4 py-3">民眾簽收單 (FIT)</td>
                                                    <td className="px-4 py-3">證明民眾已領300元</td>
                                                    <td className="px-4 py-3"><span className="text-red-500 font-bold">正本寄回</span> + 掃描檔Email</td>
                                                </tr>
                                                <tr className="hover:bg-slate-50">
                                                    <td className="px-4 py-3 font-mono font-bold text-blue-600">A02</td>
                                                    <td className="px-4 py-3">民眾簽收單 (大腸鏡)</td>
                                                    <td className="px-4 py-3">證明民眾已領300元</td>
                                                    <td className="px-4 py-3"><span className="text-red-500 font-bold">正本寄回</span> + 掃描檔Email</td>
                                                </tr>
                                                <tr className="hover:bg-slate-50">
                                                    <td className="px-4 py-3 font-mono font-bold text-gray-600">B01</td>
                                                    <td className="px-4 py-3">送件清單</td>
                                                    <td className="px-4 py-3">彙整當次送件資料</td>
                                                    <td className="px-4 py-3"><span className="text-red-500 font-bold">正本寄回</span>，一份自存</td>
                                                </tr>
                                                 <tr className="hover:bg-slate-50">
                                                    <td className="px-4 py-3 font-mono font-bold text-gray-600">B02</td>
                                                    <td className="px-4 py-3">撥付確認單</td>
                                                    <td className="px-4 py-3">確認收到公會匯款</td>
                                                    <td className="px-4 py-3">收到款項後寄回</td>
                                                </tr>
                                                <tr className="hover:bg-slate-50">
                                                    <td className="px-4 py-3 font-mono font-bold text-gray-600">B04</td>
                                                    <td className="px-4 py-3">診所獎勵金領據</td>
                                                    <td className="px-4 py-3">領取診所執行費</td>
                                                    <td className="px-4 py-3">每季結算後寄回</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    {/* Mailing Info Cards */}
                                    <div className="grid md:grid-cols-2 gap-6 mt-8">
                                        <div className="bg-white border-2 border-slate-200 rounded-xl p-5 flex items-start">
                                            <div className="bg-slate-100 p-3 rounded-full mr-4 text-slate-600">
                                                <i className="ph-fill ph-mailbox text-2xl"></i>
                                            </div>
                                            <div>
                                                <h4 className="font-bold text-slate-800 mb-1">紙本正本寄送</h4>
                                                <p className="text-slate-600 text-sm">70163 臺南市東區裕德一街2號</p>
                                                <p className="text-slate-500 text-xs mt-1">(台南市醫師公會 收)</p>
                                            </div>
                                        </div>

                                        <div className="bg-white border-2 border-slate-200 rounded-xl p-5 flex items-start">
                                            <div className="bg-slate-100 p-3 rounded-full mr-4 text-slate-600">
                                                <i className="ph-fill ph-envelope-simple text-2xl"></i>
                                            </div>
                                            <div>
                                                <h4 className="font-bold text-slate-800 mb-1">電子掃描檔 (副本)</h4>
                                                <p className="text-slate-600 text-sm font-mono select-all bg-slate-50 p-1 rounded">tma.nckuh@gmail.com</p>
                                                <p className="text-slate-500 text-xs mt-1">請務必同步寄送電子檔</p>
                                            </div>
                                        </div>
                                    </div>

                                    {/* Warnings */}
                                    <div className="bg-red-50 border-l-4 border-red-400 p-4 rounded-r-lg">
                                        <h4 className="text-red-800 font-bold mb-2 flex items-center"><i className="ph-fill ph-warning mr-2"></i> 特別注意</h4>
                                        <ul className="list-disc list-inside text-red-700 text-sm space-y-1">
                                            <li>民眾簽名必須<strong>親簽</strong>，若家屬代簽需註明「代」。</li>
                                            <li>需協助填寫問卷 (MOU簽訂時完成一份即可)。</li>
                                        </ul>
                                    </div>
                                </div>
                            )}

                        </main>
                    </div>
                </div>
            );
        };

        // --- Main App Component ---
        const App = () => {
            const [view, setView] = useState('landing'); // landing, citizen, clinic

            return (
                <React.Fragment>
                    {view === 'landing' && <LandingPage setView={setView} />}
                    {view === 'citizen' && <CitizenPortal goHome={() => setView('landing')} />}
                    {view === 'clinic' && <ClinicPortal goHome={() => setView('landing')} />}
                </React.Fragment>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>